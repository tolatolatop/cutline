{
  "id": "case_11_clip_drag_move",
  "name": "时间轴 Clip 拖动移动与裁剪",
  "description": "添加 clip 到时间轴，拖动 clip 向右移动验证位置变化，拖动右边缘裁剪验证宽度变化",
  "steps": [
    { "action": "launch" },
    { "action": "handleDirectoryPicker", "params": { "dir": "$TEMP_DIR" } },
    { "action": "handlePrompt", "params": { "value": "DragTest" } },
    { "action": "clickNewProject" },
    { "action": "waitForSelector", "params": { "testId": "project-info", "timeout": 10000 } },

    { "action": "handleFilePicker", "params": { "fixtures": ["videos/sample.mp4"] } },
    { "action": "clickImport" },
    {
      "action": "waitForTaskState",
      "params": { "kind": "thumb", "state": "succeeded", "timeout": 30000 }
    },

    { "action": "selectAsset", "params": { "index": 0 } },
    { "action": "clickAddToTimeline" },
    { "action": "waitMs", "params": { "ms": 500 } },
    { "action": "assertClipCount", "params": { "expected": 1 } },

    { "action": "assertClipLeftGreaterThan", "params": { "index": 0, "minPx": -1 } },

    { "action": "dragClipByIndex", "params": { "index": 0, "deltaXPx": 150 } },
    { "action": "waitMs", "params": { "ms": 500 } },

    { "action": "assertClipLeftGreaterThan", "params": { "index": 0, "minPx": 50 } },

    { "action": "screenshot", "params": { "name": "clip-after-drag-move" } },

    { "action": "trimClipByIndex", "params": { "index": 0, "side": "right", "deltaXPx": -40 } },
    { "action": "waitMs", "params": { "ms": 500 } },

    { "action": "assertClipWidthChanged", "params": { "index": 0, "originalPx": 100 } },

    { "action": "screenshot", "params": { "name": "clip-after-trim" } },
    { "action": "close" }
  ]
}
