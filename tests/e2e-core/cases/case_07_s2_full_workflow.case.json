{
  "id": "case_07_s2_full_workflow",
  "name": "S2 完整工作流程：导入→时间轴→标记→保存",
  "description": "完整的 S2 端到端流程：创建项目、导入素材、添加到时间轴、切换标签添加标记、编辑 Prompt、保存项目",
  "steps": [
    { "action": "launch" },
    { "action": "handleDirectoryPicker", "params": { "dir": "$TEMP_DIR" } },
    { "action": "handlePrompt", "params": { "value": "S2FullWorkflow" } },
    { "action": "clickNewProject" },
    { "action": "waitForSelector", "params": { "testId": "project-info", "timeout": 10000 } },

    { "action": "handleFilePicker", "params": { "fixtures": ["videos/sample.mp4", "images/sample.png"] } },
    { "action": "clickImport" },
    {
      "action": "waitForTaskState",
      "params": { "kind": "thumb", "state": "succeeded", "timeout": 30000 }
    },
    { "action": "assertAssetCount", "params": { "expected": 2 } },

    { "action": "selectAsset", "params": { "index": 0 } },
    { "action": "clickAddToTimeline" },
    { "action": "waitMs", "params": { "ms": 500 } },
    { "action": "assertClipCount", "params": { "expected": 1 } },

    { "action": "switchTab", "params": { "tab": "markers" } },
    { "action": "waitForSelector", "params": { "testId": "marker-panel" } },
    { "action": "clickAddMarker" },
    { "action": "waitMs", "params": { "ms": 500 } },
    { "action": "assertMarkerCount", "params": { "expected": 1 } },

    { "action": "clickMarkerRow", "params": { "index": 0 } },
    { "action": "fillMarkerLabel", "params": { "text": "开场" } },
    { "action": "fillMarkerPrompt", "params": { "text": "开场镜头：缓慢推进，暖色调" } },
    { "action": "clickSaveMarker" },
    { "action": "waitMs", "params": { "ms": 300 } },

    { "action": "clickSave" },
    { "action": "waitMs", "params": { "ms": 300 } },

    { "action": "assertSelectorVisible", "params": { "testId": "preview-player" } },
    { "action": "assertSelectorVisible", "params": { "testId": "timeline-view" } },
    { "action": "assertPreviewTimeContains", "params": { "contains": "00:00.00" } },

    { "action": "screenshot", "params": { "name": "s2-full-workflow-complete" } },
    { "action": "close" }
  ]
}
